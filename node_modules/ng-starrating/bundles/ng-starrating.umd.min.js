!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common"),require("rxjs")):"function"==typeof define&&define.amd?define("ng-starrating",["exports","@angular/core","@angular/forms","@angular/common","rxjs"],e):e((t=t||self)["ng-starrating"]={},t.ng.core,t.ng.forms,t.ng.common,t.rxjs)}(this,(function(t,e,n,r,a){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function o(t,e,n,r){var a,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,n,i):a(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i}function i(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,a,o=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(t){a={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i}var l=function(){function t(){}return t.prototype.ngOnInit=function(){},t=o([e.Component({selector:"lib-rating",template:"\n    <p>\n      rating works!\n    </p>\n  "}),i("design:paramtypes",[])],t)}(),c=function(){function t(){var t=this;this.stars=[],this._readOnly=!1,this._totalStars=5,this.rate=new e.EventEmitter,this.onStarsCountChange||(this.onStarsCountChange=new a.Subject,this.onStarsCountChange.subscribe((function(){t.setStars(),t.generateRating(!0),t.applySizeAllStars(),t.applyColorStyleAllStars(!1),t.addEvents()}))),this.onValueChange||(this.onValueChange=new a.Subject,this.onValueChange.subscribe((function(){t.generateRating(),t.applySizeAllStars()}))),this.onCheckedColorChange||(this.onCheckedColorChange=new a.Subject,this.onCheckedColorChange.subscribe((function(){t.applyColorStyleAllStars(!0)}))),this.onUnCheckedColorChange||(this.onUnCheckedColorChange=new a.Subject,this.onUnCheckedColorChange.subscribe((function(){t.applyColorStyleAllStars(!1)}))),this.onSizeChange||(this.onSizeChange=new a.Subject,this.onSizeChange.subscribe((function(){t.applySizeAllStars()}))),this.onReadOnlyChange||(this.onReadOnlyChange=new a.Subject,this.onReadOnlyChange.subscribe((function(){t.readonly?t.makeReadOnly():t.makeEditable()})))}var n;return n=t,Object.defineProperty(t.prototype,"checkedcolor",{get:function(){return this._checkedColor},set:function(t){this._checkedColor=t,this._checkedColor&&this.onCheckedColorChange.next(this._checkedColor)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uncheckedcolor",{get:function(){return this._unCheckedColor},set:function(t){this._unCheckedColor=t,this._unCheckedColor&&this.onUnCheckedColorChange.next(this._unCheckedColor)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){t=t&&null!=t?t:0,this._value=t,this._value>=0&&this.onValueChange.next(this._value)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size.concat(this._size.includes("px")?"":"px")},set:function(t){t=t&&null!=t&&"0px"!=t?t:"24px",this._size=t,this.onSizeChange.next(this._size)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readonly",{get:function(){return"true"===String(this._readOnly)},set:function(t){this._readOnly=t,this.onReadOnlyChange.next(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalstars",{get:function(){return this._totalStars},set:function(t){this._totalStars=t<=0?5:Math.round(t),this.onStarsCountChange.next(this._totalStars)},enumerable:!0,configurable:!0}),t.prototype.makeEditable=function(){this.mainElement&&(this.mainElement.nativeElement.style.cursor="pointer",this.mainElement.nativeElement.title=this.value,this.stars.forEach((function(t){t.style.cursor="pointer",t.title=t.dataset.index})))},t.prototype.makeReadOnly=function(){this.mainElement&&(this.mainElement.nativeElement.style.cursor="default",this.mainElement.nativeElement.title=this.value,this.stars.forEach((function(t){t.style.cursor="default",t.title=""})))},t.prototype.addEvents=function(){var t=this;this.mainElement&&(this.mainElement.nativeElement.addEventListener("mouseleave",this.offStar.bind(this)),this.mainElement.nativeElement.style.cursor="pointer",this.mainElement.nativeElement.title=this.value,this.stars.forEach((function(e){e.addEventListener("click",t.onRate.bind(t)),e.addEventListener("mouseenter",t.onStar.bind(t)),e.style.cursor="pointer",e.title=e.dataset.index})))},t.prototype.ngAfterViewInit=function(){},t.prototype.onRate=function(t){if(!this.readonly){var e=t.srcElement,n=this.value;this.value=parseInt(e.dataset.index),0==this.value&&(this.value=1);var r={oldValue:n,newValue:this.value,starRating:this};this.rate.emit(r)}},t.prototype.onStar=function(t){if(!this.readonly){for(var e=t.srcElement,n=parseInt(e.dataset.index),r=0;r<n;r++)this.stars[r].className="",this.addDefaultClass(this.stars[r]),this.addCheckedStarClass(this.stars[r]);for(r=n;r<this.stars.length;r++)this.stars[r].className="",this.addDefaultClass(this.stars[r])}},t.prototype.offStar=function(t){this.generateRating()},t.prototype.addDefaultClass=function(t){t.classList.add(n.CLS_DEFAULT_STAR)},t.prototype.addCheckedStarClass=function(t){t.classList.add(n.CLS_CHECKED_STAR)},t.prototype.addHalfStarClass=function(t){t.classList.add(n.CLS_HALF_STAR)},t.prototype.setStars=function(){var t=this;if(this.mainElement){var e=this.mainElement.nativeElement,n=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}(Array(Number(this.totalstars)).keys());this.stars.length=0,e.innerHTML="",n.forEach((function(n){var r=document.createElement("span");r.dataset.index=(n+1).toString(),r.title=r.dataset.index,e.appendChild(r),t.stars.push(r)}))}},t.prototype.applySizeAllStars=function(){var t=this;this._size&&(0==this.stars.length&&this.setStars(),this.stars.forEach((function(e){var r=t.size.match(/\d+/)[0],a=10*parseInt(r)/24,o=0-20*parseInt(r)/24;e.style.setProperty(n.VAR_SIZE,t.size),e.classList.contains(n.CLS_HALF_STAR)&&(e.style.setProperty(n.VAR_HALF_WIDTH,a+"px"),e.style.setProperty(n.VAR_HALF_MARGIN,o+"px"))})))},t.prototype.applyColorStyleAllStars=function(t){var e=this;0==this.stars.length&&this.setStars(),this.stars.forEach((function(n){t?e.applyCheckedColorStyle(n):e.applyUnCheckedColorStyle(n)}))},t.prototype.applyColorStyle=function(t){this.applyCheckedColorStyle(t),this.applyUnCheckedColorStyle(t)},t.prototype.applyCheckedColorStyle=function(t){t.style.setProperty(n.VAR_CHECKED_COLOR,this.checkedcolor)},t.prototype.applyUnCheckedColorStyle=function(t){t.style.setProperty(n.VAR_UNCHECKED_COLOR,this.uncheckedcolor)},t.prototype.generateRating=function(t){var e=this;if(void 0===t&&(t=!1),(!this.readonly||t)&&this.mainElement&&(0==this.stars.length&&this.setStars(),this.value>=0)){this.mainElement.nativeElement.title=this.value;var n=!!(Number.parseFloat(this.value.toString())%1).toString().substring(3,2),r=1;this.stars.forEach((function(t){t.className="",e.applyColorStyle(t),e.addDefaultClass(t),e.value>=r?e.addCheckedStarClass(t):n&&(e.addHalfStarClass(t),n=!1),r++}))}},t.VAR_CHECKED_COLOR="--checkedColor",t.VAR_UNCHECKED_COLOR="--unCheckedColor",t.VAR_SIZE="--size",t.VAR_HALF_WIDTH="--halfWidth",t.VAR_HALF_MARGIN="--halfMargin",t.CLS_CHECKED_STAR="on",t.CLS_DEFAULT_STAR="star",t.CLS_HALF_STAR="half",t.INP_CHECKED_COLOR="checkedcolor",t.INP_UNCHECKED_COLOR="uncheckedcolor",t.INP_VALUE="value",t.INP_SIZE="size",t.INP_READONLY="readonly",t.INP_TOTALSTARS="totalstars",o([e.ViewChild("starMain",{static:!0}),i("design:type",e.ElementRef)],t.prototype,"mainElement",void 0),o([e.Output(),i("design:type",e.EventEmitter)],t.prototype,"rate",void 0),o([e.Input(n.INP_CHECKED_COLOR),i("design:type",String),i("design:paramtypes",[String])],t.prototype,"checkedcolor",null),o([e.Input(n.INP_UNCHECKED_COLOR),i("design:type",String),i("design:paramtypes",[String])],t.prototype,"uncheckedcolor",null),o([e.Input(n.INP_VALUE),i("design:type",Number),i("design:paramtypes",[Number])],t.prototype,"value",null),o([e.Input(n.INP_SIZE),i("design:type",String),i("design:paramtypes",[String])],t.prototype,"size",null),o([e.Input(n.INP_READONLY),i("design:type",Boolean),i("design:paramtypes",[Boolean])],t.prototype,"readonly",null),o([e.Input(n.INP_TOTALSTARS),i("design:type",Number),i("design:paramtypes",[Number])],t.prototype,"totalstars",null),t=n=o([e.Component({selector:"star-rating",template:'<div #starMain>\r\n</div>\r\n\r\n\x3c!-- <ng-container *ngFor="let star of stars; let i = index;">\r\n    <span \r\n        (click)="!isReadOnly && onRate(i)" \r\n        (mouseleave)="!isReadOnly && generateRating()"\r\n        (mouseenter)="!isReadOnly && onStar(i)" \r\n        [ngStyle]="{\r\n            \'font-size\': getSize(),\r\n            \'width\': getSize(),\r\n            pointer: isReadOnly ? \'default\' : \'pointer\'\r\n        }" \r\n        [ngClass]="{\r\n            on: star.checked,\r\n            half: star.isHalf,\r\n            readOnly: isReadOnly,\r\n            editable: !isReadOnly\r\n        }"></span>\r\n</ng-container> --\x3e',encapsulation:e.ViewEncapsulation.ShadowDom,styles:[":root{--checkedColor:gold;--unCheckedColor:gray;--size:24px;--halfWidth:10px;--halfMargin:-20px}.star{cursor:pointer;color:var(--unCheckedColor);font-size:var(--size);width:var(--size);display:inline-block}.star:last-child{margin-right:0}.star:before{content:'\\2605'}.star.on{color:var(--checkedColor)}.star.half:after{content:'\\2605';color:var(--checkedColor);position:absolute;margin-left:var(--halfMargin);width:var(--halfWidth);overflow:hidden}"]}),i("design:paramtypes",[])],t)}(),h=function(){function t(){}return t.prototype.ngDoBootstrap=function(){},t=o([e.NgModule({imports:[n.FormsModule,r.CommonModule],declarations:[l,c],exports:[c],entryComponents:[c]})],t)}();t.RatingModule=h,t.StarRatingComponent=c,t.ɵa=l,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-starrating.umd.min.js.map